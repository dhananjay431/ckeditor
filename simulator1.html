<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>

  <style>
    #loader {
    position: fixed;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
    z-index: 9999;
    background: url('animated-car-image-0049.gif') 50% 50%  no-repeat grey;
  }

  </style>
  <title>Hello, world!</title>
  <script>
    var latLngData =  [{"lat":18.59205,"lng":73.7579},{"lat":18.592000000000002,"lng":73.75691},{"lat":18.592000000000002,"lng":73.75658},{"lat":18.591990000000003,"lng":73.75623},{"lat":18.591980000000003,"lng":73.75552},{"lat":18.59196,"lng":73.75504000000001},{"lat":18.591920000000002,"lng":73.75464000000001},{"lat":18.59183,"lng":73.75432},{"lat":18.591790000000003,"lng":73.75417},{"lat":18.59164,"lng":73.75385},{"lat":18.5915,"lng":73.75352000000001},{"lat":18.59091,"lng":73.75214000000001},{"lat":18.5908,"lng":73.75178000000001},{"lat":18.590760000000003,"lng":73.75138000000001},{"lat":18.590860000000003,"lng":73.75137000000001},{"lat":18.59089,"lng":73.75176},{"lat":18.59094,"lng":73.75196000000001},{"lat":18.591130000000003,"lng":73.75239},{"lat":18.59169,"lng":73.75372},{"lat":18.591790000000003,"lng":73.75395},{"lat":18.591910000000002,"lng":73.75427},{"lat":18.59197,"lng":73.75466},{"lat":18.59202,"lng":73.75547},{"lat":18.59203,"lng":73.75622},{"lat":18.59203,"lng":73.75653000000001},{"lat":18.59204,"lng":73.75686},{"lat":18.592100000000002,"lng":73.75796000000001},{"lat":18.59215,"lng":73.75844000000001},{"lat":18.59241,"lng":73.76025},{"lat":18.592540000000003,"lng":73.76118000000001},{"lat":18.59253,"lng":73.76148},{"lat":18.592360000000003,"lng":73.76264},{"lat":18.59223,"lng":73.76397},{"lat":18.592190000000002,"lng":73.76467000000001},{"lat":18.59211,"lng":73.76511},{"lat":18.59205,"lng":73.76536},{"lat":18.59196,"lng":73.76555},{"lat":18.591800000000003,"lng":73.76587},{"lat":18.59118,"lng":73.76685},{"lat":18.590950000000003,"lng":73.76726000000001},{"lat":18.59044,"lng":73.76833},{"lat":18.59024,"lng":73.76879000000001},{"lat":18.59018,"lng":73.76906000000001},{"lat":18.59016,"lng":73.76934},{"lat":18.590155,"lng":73.77067},{"lat":18.59015,"lng":73.772},{"lat":18.59018,"lng":73.77308000000001},{"lat":18.59015,"lng":73.77335000000001},{"lat":18.59005,"lng":73.77372000000001},{"lat":18.589910000000003,"lng":73.7741},{"lat":18.589650000000002,"lng":73.77479000000001},{"lat":18.589350000000003,"lng":73.77559000000001},{"lat":18.58924,"lng":73.77600000000001},{"lat":18.589170000000003,"lng":73.77639},{"lat":18.589170000000003,"lng":73.77691},{"lat":18.589350000000003,"lng":73.7776},{"lat":18.58943,"lng":73.77779000000001},{"lat":18.589640000000003,"lng":73.77819000000001},{"lat":18.58989,"lng":73.77861},{"lat":18.59028,"lng":73.77927000000001},{"lat":18.591320000000003,"lng":73.78068},{"lat":18.591600000000003,"lng":73.78104},{"lat":18.59203,"lng":73.78151000000001},{"lat":18.59216,"lng":73.7817},{"lat":18.59221,"lng":73.78193},{"lat":18.59221,"lng":73.78219},{"lat":18.59211,"lng":73.78274},{"lat":18.591990000000003,"lng":73.78349},{"lat":18.59185,"lng":73.78434},{"lat":18.59186,"lng":73.78457},{"lat":18.59194,"lng":73.78473000000001},{"lat":18.59204,"lng":73.78484},{"lat":18.59216,"lng":73.78492},{"lat":18.59244,"lng":73.7851},{"lat":18.592840000000002,"lng":73.78547},{"lat":18.593130000000002,"lng":73.78580000000001},{"lat":18.59403,"lng":73.78674000000001},{"lat":18.59525,"lng":73.78798},{"lat":18.59533,"lng":73.78809000000001},{"lat":18.59535,"lng":73.78809000000001},{"lat":18.595390000000002,"lng":73.78811},{"lat":18.59543,"lng":73.78818000000001},{"lat":18.59624,"lng":73.78908000000001},{"lat":18.597150000000003,"lng":73.78995},{"lat":18.597250000000003,"lng":73.79007},{"lat":18.59731,"lng":73.79019000000001},{"lat":18.597360000000002,"lng":73.79024000000001},{"lat":18.5974,"lng":73.79027},{"lat":18.597430000000003,"lng":73.79035},{"lat":18.597430000000003,"lng":73.79043},{"lat":18.59738,"lng":73.79051000000001},{"lat":18.59729,"lng":73.79055000000001},{"lat":18.597250000000003,"lng":73.79055000000001},{"lat":18.597150000000003,"lng":73.79068000000001},{"lat":18.597060000000003,"lng":73.79088},{"lat":18.59694,"lng":73.79125},{"lat":18.59683,"lng":73.79168},{"lat":18.596790000000002,"lng":73.79198000000001},{"lat":18.596790000000002,"lng":73.79244},{"lat":18.59685,"lng":73.79398},{"lat":18.596890000000002,"lng":73.79466000000001},{"lat":18.59694,"lng":73.79498000000001},{"lat":18.59702,"lng":73.79534000000001},{"lat":18.59709,"lng":73.79557000000001},{"lat":18.5972,"lng":73.79582},{"lat":18.59732,"lng":73.79602000000001},{"lat":18.59767,"lng":73.79647},{"lat":18.59788,"lng":73.79684},{"lat":18.59805,"lng":73.7972},{"lat":18.59814,"lng":73.79743},{"lat":18.59822,"lng":73.7977},{"lat":18.59824,"lng":73.79801},{"lat":18.59823,"lng":73.79893000000001},{"lat":18.598180000000003,"lng":73.79959000000001},{"lat":18.597975,"lng":73.800575},{"lat":18.59777,"lng":73.80156},{"lat":18.59768,"lng":73.80227000000001},{"lat":18.59769,"lng":73.80229},{"lat":18.597710000000003,"lng":73.80235},{"lat":18.59768,"lng":73.80243},{"lat":18.59766,"lng":73.80245000000001},{"lat":18.597610000000003,"lng":73.80247},{"lat":18.597520000000003,"lng":73.80248},{"lat":18.597450000000002,"lng":73.80245000000001},{"lat":18.59741,"lng":73.8024},{"lat":18.5974,"lng":73.80238},{"lat":18.597340000000003,"lng":73.80238},{"lat":18.59709,"lng":73.80233000000001},{"lat":18.59701,"lng":73.80228000000001},{"lat":18.59562,"lng":73.80213},{"lat":18.595560000000003,"lng":73.80215000000001},{"lat":18.59552,"lng":73.8022},{"lat":18.595460000000003,"lng":73.80231},{"lat":18.59542,"lng":73.80250000000001},{"lat":18.59534,"lng":73.8031},{"lat":18.59531,"lng":73.80379},{"lat":18.595290000000002,"lng":73.80385000000001},{"lat":18.59521,"lng":73.80394000000001},{"lat":18.595100000000002,"lng":73.80398000000001},{"lat":18.59412,"lng":73.80393000000001},{"lat":18.595100000000002,"lng":73.80398000000001},{"lat":18.59521,"lng":73.80394000000001},{"lat":18.595290000000002,"lng":73.80385000000001},{"lat":18.59531,"lng":73.80379},{"lat":18.59534,"lng":73.8031},{"lat":18.59542,"lng":73.80250000000001},{"lat":18.595460000000003,"lng":73.80231},{"lat":18.59552,"lng":73.8022},{"lat":18.595560000000003,"lng":73.80215000000001},{"lat":18.59562,"lng":73.80213},{"lat":18.59701,"lng":73.80228000000001},{"lat":18.5971,"lng":73.80225},{"lat":18.597350000000002,"lng":73.80227000000001},{"lat":18.59741,"lng":73.80228000000001},{"lat":18.597450000000002,"lng":73.80223000000001},{"lat":18.59767,"lng":73.80111000000001},{"lat":18.59785,"lng":73.80033},{"lat":18.59797,"lng":73.79957},{"lat":18.59803,"lng":73.79878000000001},{"lat":18.59804,"lng":73.79775000000001},{"lat":18.59779,"lng":73.79707},{"lat":18.597520000000003,"lng":73.79661},{"lat":18.59709,"lng":73.79605000000001},{"lat":18.596880000000002,"lng":73.79555},{"lat":18.596700000000002,"lng":73.79493000000001},{"lat":18.596670000000003,"lng":73.7946},{"lat":18.59662,"lng":73.793545},{"lat":18.59657,"lng":73.79249},{"lat":18.596580000000003,"lng":73.79197},{"lat":18.59664,"lng":73.79147},{"lat":18.5969,"lng":73.79075},{"lat":18.59703,"lng":73.79053},{"lat":18.59713,"lng":73.79046000000001},{"lat":18.59713,"lng":73.79043},{"lat":18.59712,"lng":73.79039},{"lat":18.59712,"lng":73.79034},{"lat":18.597140000000003,"lng":73.7903},{"lat":18.597150000000003,"lng":73.79028000000001},{"lat":18.597160000000002,"lng":73.79026},{"lat":18.597,"lng":73.79011000000001},{"lat":18.596860000000003,"lng":73.78996000000001},{"lat":18.59587,"lng":73.78896},{"lat":18.595290000000002,"lng":73.78831000000001},{"lat":18.595270000000003,"lng":73.7883},{"lat":18.59522,"lng":73.78836000000001},{"lat":18.59525,"lng":73.78829},{"lat":18.59525,"lng":73.78828},{"lat":18.59523,"lng":73.78826000000001},{"lat":18.59522,"lng":73.78822000000001},{"lat":18.59506,"lng":73.78804000000001},{"lat":18.594015,"lng":73.786985},{"lat":18.59297,"lng":73.78593},{"lat":18.59231,"lng":73.78521},{"lat":18.592070000000003,"lng":73.78508000000001},{"lat":18.591890000000003,"lng":73.78495000000001},{"lat":18.59176,"lng":73.78479},{"lat":18.59169,"lng":73.78465},{"lat":18.59164,"lng":73.78448},{"lat":18.59165,"lng":73.78431},{"lat":18.591700000000003,"lng":73.78401000000001},{"lat":18.591800000000003,"lng":73.78338000000001},{"lat":18.592000000000002,"lng":73.78215},{"lat":18.592000000000002,"lng":73.78192},{"lat":18.59193,"lng":73.78174},{"lat":18.59177,"lng":73.78154},{"lat":18.591440000000002,"lng":73.78119000000001},{"lat":18.59118,"lng":73.78084000000001},{"lat":18.590120000000002,"lng":73.77941000000001},{"lat":18.590030000000002,"lng":73.77926000000001},{"lat":18.589850000000002,"lng":73.77890000000001},{"lat":18.58915,"lng":73.77759},{"lat":18.588980000000003,"lng":73.77704},{"lat":18.58895,"lng":73.7767},{"lat":18.58896,"lng":73.77641000000001},{"lat":18.588990000000003,"lng":73.77619},{"lat":18.58911,"lng":73.7757},{"lat":18.58941,"lng":73.77479000000001},{"lat":18.589760000000002,"lng":73.774},{"lat":18.58988,"lng":73.77363000000001},{"lat":18.58998,"lng":73.77334},{"lat":18.589965,"lng":73.772235},{"lat":18.58995,"lng":73.77113},{"lat":18.58998,"lng":73.77078},{"lat":18.58997,"lng":73.7693},{"lat":18.590020000000003,"lng":73.76891},{"lat":18.59016,"lng":73.76851},{"lat":18.59053,"lng":73.76773},{"lat":18.59093,"lng":73.76692},{"lat":18.591130000000003,"lng":73.76653},{"lat":18.591340000000002,"lng":73.76620000000001},{"lat":18.591610000000003,"lng":73.7659},{"lat":18.591790000000003,"lng":73.76563},{"lat":18.59194,"lng":73.76531},{"lat":18.592070000000003,"lng":73.76488},{"lat":18.59213,"lng":73.76455},{"lat":18.59214,"lng":73.76432000000001},{"lat":18.59216,"lng":73.76367},{"lat":18.592270000000003,"lng":73.76270000000001},{"lat":18.59241,"lng":73.76175},{"lat":18.59244,"lng":73.76123000000001},{"lat":18.59242,"lng":73.76079},{"lat":18.592245,"lng":73.759465},{"lat":18.59207,"lng":73.75814},{"lat":18.59202,"lng":73.75747000000001},{"lat":18.592000000000002,"lng":73.75691},{"lat":18.592000000000002,"lng":73.75658},{"lat":18.591990000000003,"lng":73.75623},{"lat":18.591980000000003,"lng":73.75552},{"lat":18.59196,"lng":73.75504000000001},{"lat":18.591920000000002,"lng":73.75464000000001},{"lat":18.59183,"lng":73.75432},{"lat":18.591790000000003,"lng":73.75417},{"lat":18.59164,"lng":73.75385},{"lat":18.5915,"lng":73.75352000000001},{"lat":18.59091,"lng":73.75214000000001},{"lat":18.5908,"lng":73.75178000000001},{"lat":18.59075,"lng":73.75125000000001},{"lat":18.59074,"lng":73.75078},{"lat":18.590780000000002,"lng":73.75026000000001},{"lat":18.590880000000002,"lng":73.74933},{"lat":18.59091,"lng":73.74900000000001},{"lat":18.59089,"lng":73.74888},{"lat":18.59073,"lng":73.7479},{"lat":18.59071,"lng":73.74761000000001},{"lat":18.59085,"lng":73.74657},{"lat":18.59099,"lng":73.74553},{"lat":18.59112,"lng":73.74415},{"lat":18.591150000000003,"lng":73.74369},{"lat":18.591070000000002,"lng":73.74314000000001},{"lat":18.591060000000002,"lng":73.74304000000001}];
    var latlng = [];
    fetch("//139.59.1.178//gps/v2?id=352353085476387&from=2020-02-17T18:30:40.413Z&to=2020-02-18T04:54:40.437Z").then(json => json.json()).then(function (resp) {
      console.log(resp);
      if(resp.length == 0){
        latlng = latLngData ;
      }else{
        latlng = resp;
      }
      
      latlng = latlng.reverse();
      var _io = io.connect('//139.59.1.178//mTracker', {
        secure: true, rejectUnauthorized: false, transports: ["websocket", "polling"], upgrade: false
      });

      _io.on('connect', function (data) {
        console.log('ON...');
      });
      var z = 0;
      setInterval(function () {
        var data = {
          curLat: latlng[z].lat,
          curLong: latlng[z].lng,
          curDateTime: moment().subtract(30, 'seconds').toISOString(),
          //imei:'862738031133459' 
          imei: '351510090230858',
          speed: Math.floor(Math.random() * 100) + 1
        };
        console.log(z, data);
        _io.emit('Ping', '351510090230858', data);
        z += 1;
        if ((latlng.length) == z) {
          z = 0;
        }

      }, 200);

    })
  </script>
</head>
<body>
  <h1>Hello, world!</h1>
  <div id="loader"></div>
</body>
</html>
